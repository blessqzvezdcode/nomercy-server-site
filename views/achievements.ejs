<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - NoMercy</title>
    <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/achievements.css">
</head>
<body>
    <nav>
        <a href="/" class="brand">NoMercy</a>
        <div class="nav-buttons">
            <% if (user) { %>
                <a href="/messenger" class="nav-messenger-btn" title="–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä">üí¨</a>
                <div class="dropdown">
                    <button class="dropdown-toggle">
                        <span>üë§ <%= user.name %> (üí∞ <%= balance %>)</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="/" class="dropdown-item">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                        <a href="/profile/<%= user.id %>" class="dropdown-item">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
                        <a href="/market" class="dropdown-item">üõí –ú–∞—Ä–∫–µ—Ç</a>
                        <a href="/cards" class="dropdown-item">üÉè –ö–∞—Ä—Ç—ã</a>
                        <a href="/quests" class="dropdown-item">‚öîÔ∏è –ö–≤–µ—Å—Ç—ã</a>
                        <a href="/games" class="dropdown-item">üéÆ –ò–≥—Ä—ã</a>
                        <a href="/news" class="dropdown-item">üì∞ –ù–æ–≤–æ—Å—Ç–∏</a>
                        <a href="/faq" class="dropdown-item">‚ùì FAQ</a>
                        <a href="/achievements" class="dropdown-item active">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
                        <a href="/support" class="dropdown-item">üéß –ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
                        <div class="dropdown-divider"></div>
                        <% if (user.role === 'admin') { %>
                            <a href="/admin" class="dropdown-item">‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞</a>
                            <div class="dropdown-divider"></div>
                        <% } %>
                        <button class="dropdown-item theme-toggle" id="theme-toggle">üåô –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</button>
                        <div class="dropdown-divider"></div>
                        <a href="/logout" class="dropdown-item">üö™ –í—ã–π—Ç–∏</a>
                    </div>
                </div>
            <% } else { %>
                <a href="/auth/discord" class="btn">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord</a>
            <% } %>
        </div>
    </nav>

    <div class="container">
        <div class="achievements-header">
            <h1>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –£—Ä–æ–≤–Ω–∏</h1>
            <p>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ XP –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∑–≤–∞–Ω–∏—è!</p>
        </div>

        <!-- Current Level Display -->
        <div class="level-card" style="background: linear-gradient(135deg, <%= levelData.color %>, <%= levelData.color %>88);">
            <div class="level-info">
                <div class="level-badge">
                    <span class="level-number"><%= levelData.level %></span>
                </div>
                <div class="level-details">
                    <h2 class="level-title" style="color: <%= levelData.color %>;"><%= levelData.title %></h2>
                    <div class="xp-bar">
                        <div class="xp-progress" style="width: <%= Math.min(100, ((user.xp || 0) % 1000) / 10) %>%"></div>
                        <span class="xp-text"><%= user.xp || 0 %> XP</span>
                    </div>
                </div>
            </div>
            <div class="level-frame <%= levelData.frame %>"></div>
        </div>

        <!-- XP Sources -->
        <div class="xp-sources">
            <h3>üí° –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å XP:</h3>
            <div class="xp-grid">
                <div class="xp-item">
                    <span class="xp-icon">üõí</span>
                    <div class="xp-details">
                        <h4>–ü–æ–∫—É–ø–∫–∞ –≤ –º–∞—Ä–∫–µ—Ç–µ</h4>
                        <p>+10 XP –∑–∞ –∫–∞–∂–¥—É—é –ø–æ–∫—É–ø–∫—É</p>
                    </div>
                </div>
                <div class="xp-item">
                    <span class="xp-icon">üí∞</span>
                    <div class="xp-details">
                        <h4>–ü—Ä–æ–¥–∞–∂–∞ –≤ –º–∞—Ä–∫–µ—Ç–µ</h4>
                        <p>+15 XP –∑–∞ –∫–∞–∂–¥—É—é –ø—Ä–æ–¥–∞–∂—É</p>
                    </div>
                </div>
                <div class="xp-item">
                    <span class="xp-icon">üé∞</span>
                    <div class="xp-details">
                        <h4>–ì–∞—á–∞ –∫—Ä—É—Ç–∫–∏</h4>
                        <p>+5 XP –∑–∞ 1 –∫—Ä—É—Ç–∫—É, +20 XP –∑–∞ 10 –∫—Ä—É—Ç–æ–∫</p>
                    </div>
                </div>
                <div class="xp-item">
                    <span class="xp-icon">üìù</span>
                    <div class="xp-details">
                        <h4>–û—Ç–∑—ã–≤—ã</h4>
                        <p>+5 XP –∑–∞ –∫–∞–∂–¥—ã–π –æ—Ç–∑—ã–≤</p>
                    </div>
                </div>
                <div class="xp-item">
                    <span class="xp-icon">üì¶</span>
                    <div class="xp-details">
                        <h4>–°–æ–∑–¥–∞–Ω–∏–µ –ª–æ—Ç–æ–≤</h4>
                        <p>+8 XP –∑–∞ –∫–∞–∂–¥—ã–π –ª–æ—Ç</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Level Progression -->
        <div class="level-progression">
            <h3>üìà –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω–µ–π:</h3>
            <div class="levels-grid">
                <div class="level-item <%= levelData.level >= 1 ? 'unlocked' : '' %>">
                    <div class="level-icon">ü•â</div>
                    <div class="level-info">
                        <h4>–ù–æ–≤–∏—á–æ–∫</h4>
                        <p>0-99 XP</p>
                    </div>
                </div>
                <div class="level-item <%= levelData.level >= 2 ? 'unlocked' : '' %>">
                    <div class="level-icon">ü•à</div>
                    <div class="level-info">
                        <h4>–¢–æ—Ä–≥–æ–≤–µ—Ü</h4>
                        <p>100-499 XP</p>
                    </div>
                </div>
                <div class="level-item <%= levelData.level >= 3 ? 'unlocked' : '' %>">
                    <div class="level-icon">ü•á</div>
                    <div class="level-info">
                        <h4>–û–ø—ã—Ç–Ω—ã–π</h4>
                        <p>500-1499 XP</p>
                    </div>
                </div>
                <div class="level-item <%= levelData.level >= 4 ? 'unlocked' : '' %>">
                    <div class="level-icon">üíé</div>
                    <div class="level-info">
                        <h4>–≠–∫—Å–ø–µ—Ä—Ç</h4>
                        <p>1500-2999 XP</p>
                    </div>
                </div>
                <div class="level-item <%= levelData.level >= 5 ? 'unlocked' : '' %>">
                    <div class="level-icon">üëë</div>
                    <div class="level-info">
                        <h4>–ú–∞—Å—Ç–µ—Ä</h4>
                        <p>3000-4999 XP</p>
                    </div>
                </div>
                <div class="level-item <%= levelData.level >= 6 ? 'unlocked' : '' %>">
                    <div class="level-icon">üî•</div>
                    <div class="level-info">
                        <h4>–õ–µ–≥–µ–Ω–¥–∞ —Ä—ã–Ω–∫–∞</h4>
                        <p>5000+ XP</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Achievements -->
        <% if (user.achievements && user.achievements.length > 0) { %>
        <div class="recent-achievements">
            <h3>üèÖ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h3>
            <div class="achievements-list">
                <% user.achievements.slice(-5).reverse().forEach(function(achievement) { %>
                <div class="achievement-item">
                    <div class="achievement-icon">üèÜ</div>
                    <div class="achievement-details">
                        <h4><%= achievement.description %></h4>
                        <p><%= new Date(achievement.date).toLocaleDateString() %></p>
                    </div>
                </div>
                <% }); %>
            </div>
        </div>
        <% } %>
    </div>

    <script>
        // Add some interactive effects
        document.addEventListener('DOMContentLoaded', function() {
            // Animate XP bar
            const xpBar = document.querySelector('.xp-progress');
            if (xpBar) {
                setTimeout(() => {
                    xpBar.style.transition = 'width 1s ease-in-out';
                }, 500);
            }
            
            // Add hover effects to level items
            const levelItems = document.querySelectorAll('.level-item');
            levelItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                });
                item.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
    <script src="/js/dropdown.js"></script>
    <script src="/js/theme-switcher.js"></script>
</body>
</html>
